#
# Helper function to generate completion wrappers for aliased commands
#

function make_completion_wrapper()
{
    local function_name="$2"
    local arg_count=$(($#-3))
    local comp_function_name="$1"
    shift 2
    local function="
        function $function_name {
            ((COMP_CWORD+=$arg_count))
            COMP_WORDS=( "$@" \${COMP_WORDS[@]:1} )
            "$comp_function_name"
            return 0
        }"
    eval "$function"
    test "$(type -t _completion_loader)" = 'function' && _completion_loader "$@"
}
